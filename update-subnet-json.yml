#https://ash-sidhu.blog/2018/11/07/using-ansible-for-automating-tasks-on-checkpoint-firewall/
---
- name: Update Subnet JSON file
  hosts: ckp
  connection: httpapi
  gather_facts: no

  tasks:

    - name: List subnet objects
      cp_mgmt_network_facts:
      register: subnet_output

    # - name: debug subnets
    #   debug:
    #     var: subnet_output


    - file:
        path: /tmp/subnet_output.json
        state: absent
      run_once: yes
      delegate_to: localhost
      
    - copy:
        dest: /tmp/subnet_output.json
        content: "{{ subnet_output }}"
      run_once: yes
      delegate_to: localhost
